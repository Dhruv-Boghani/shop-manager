<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Edit Shop</title>
  <link rel="stylesheet" href="/css/edit-shop.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
</head>

<body>
  <div class="custom-container">
    <h2 class="page-title">Edit Shop</h2>

    <form action="/shop/edit/<%= shop._id %>" method="POST" class="edit-form">
      <div class="form-group">
        <label for="name" class="form-label">Shop Name</label>
        <input type="text" class="form-input" id="name" name="name" value="<%= shop.name %>" required>
      </div>

      <div class="form-group">
        <label for="address" class="form-label">Address</label>
        <input type="text" class="form-input" id="address" name="address" value="<%= shop.address %>" required>
      </div>

      <div class="form-group">
        <label for="product" class="form-label">Select Products</label>
        <select id="product" name="product" class="form-input choices-select" multiple>
          <% products.forEach(product=> { %>
            <option value="<%= product._id %>" <%=shop.product.includes(product._id.toString()) ? 'selected' : '' %>>
              <%= product.name %> ( <%= product.productSKU %> )
            </option>
            <% }) %>
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Update Shop</button>
        <a href="/shop" class="btn btn-secondary">Cancel</a>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
  <script>
    const choices = new Choices('.choices-select', {
      removeItemButton: true,
      placeholder: true,
      searchPlaceholderValue: 'Search products...',
      noResultsText: 'No matching products',
      noChoicesText: 'No products available',
    });
  </script>
</body>

</html>